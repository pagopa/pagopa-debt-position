@startuml ER-debtPosition
left to right direction

title ER - Debt Position

entity debtor {
  * id
  --
  * type
  * fiscal_code
  --
  * full_name
  street_name
  civic_number
  postal_code
  city
  province
  region
  country
  email
  phone
  * inserted_date
  * last_updated_date ( = insert_date al primo inserimento)
}


entity payment_position {
  * id
  --
  * IUPD
  * organization_fiscal_code
  --
  * company_name
  * office_name
  * inserted_date 
    publish_date ( ACTION publish )
    validity_date ( cron job )
  * inserted_date 
  * status 
  * last_updated_date ( = insert_date al primo inserimento)
}


entity payment_option {
  * id
  --
  * IUV(creditorReferenceId)(notification_code)
  * organization_fiscal_code
  --
  * amount
  * is_partial_payment
  * due_date
    retention_date
    payment_date
    reporting_date
  * inserted_date
    payment_method
  * fee
    psp_company
    receipt_id
    flow_reporting_id
    description
  * status
  * last_updated_date ( = insert_date al primo inserimento)
}


entity transfer {
  * id
  --
  * organization_fiscal_code
  * transfer_id
  * amount
  * remittance_information
  * category (= taxonomy)
  * iban
    postal_iban
  * inserted_date
  * status
  * last_updated_date ( = insert_date al primo inserimento) 
}

debtor ||.|{ payment_position
payment_position ||..|{ payment_option
payment_option ||..|{ transfer
@enduml